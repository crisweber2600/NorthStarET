<div ng-controller="SchoolDashboardMCAController">
    <div id="page-heading">
        <ol class="breadcrumb">
            <li>Reports</li>
            <li class="active">School Dashboard - MCA</li>
        </ol>
        <h1>School Dashboard for MCA Data</h1>
        <div class="options">
            <div class="btn-toolbar">
                <stacked-bar-graph-summary-attribute-chooser></stacked-bar-graph-summary-attribute-chooser>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row" style="min-height:350px;">
            <div class="col-md-12 hidden-print" style="margin-bottom:20px;">
                <ns-filter-options-container-directive school-year-enabled="true" school-enabled="true" grade-enabled="true"></ns-filter-options-container-directive>
            </div>
            <div class="col-md-12">
                <div class="form-group col-md-8">
                    <label for="radio" style="font-weight:bold;font-size:14px;padding-right:15px;" class="control-label">Report By</label>
                    <div class="radio block"><label><input icheck type="radio" ng-model="settings.stacking" value="normal" name="stacking" checked> Number of Students</label></div>
                    <div class="radio block"><label><input icheck type="radio" ng-model="settings.stacking" value="percent" name="stacking"> Percent of Students</label></div>
                </div>
                <spinner name="tableSpinner">
                    <div style="position:absolute;width:100%;height:100%;background-color:rgba(100, 100, 100, 0.7);z-index:100;">
                        <div class="sk-cube-grid">
                            <div class="sk-cube sk-cube1"></div>
                            <div class="sk-cube sk-cube2"></div>
                            <div class="sk-cube sk-cube3"></div>
                            <div class="sk-cube sk-cube4"></div>
                            <div class="sk-cube sk-cube5"></div>
                            <div class="sk-cube sk-cube6"></div>
                            <div class="sk-cube sk-cube7"></div>
                            <div class="sk-cube sk-cube8"></div>
                            <div class="sk-cube sk-cube9"></div>
                        </div>
                    </div>
                </spinner>
                <div class="col-md-12" style="margin-bottom:15px;">
                    <!--<ns-stacked-bar-graph-legend title="group.name" options="group.options" zone="settings.summaryScoreGrouping" summary-mode="settings.summaryMode" category="settings.summaryCategory"></ns-stacked-bar-graph-legend>-->
                </div>
                <div class="col-md-12" ng-if="!settings.graphGenerated || !settings.anyResults">
                    <uib-alert type="info"><b>Note:</b> There are no results available for your current selections.  Please try a different school year, school or grade combination.  Typically, you would use a previous school year for state test data.</uib-alert>
                </div>
                <div class="col-md-12" ng-if="settings.graphGenerated && settings.anyResults" ng-show="!settings.summaryMode">
                    <highchart id="chart1" config="chartConfig"></highchart>
                </div>
            </div>
            <div class="col-md-12" ng-if="settings.summaryMode">
                <div class="row">
                    <div class="col-md-2" style="padding-bottom:10px;">
                        <a ng-click="changeToChartMode()" class="btn btn-danger"><i class="fa fa-arrow-circle-left"></i> Back to Bar Graph</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <panel panel-class="panel-midnightblue" heading="{{settings.summaryView}}">
                            <div style="overflow-x:auto">
                                <table class="table table-striped" ng-if="settings.summaryView == 'Current Year Only (Sortable)'">
                                    <thead>
                                        <tr>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('Student')">Student Name <i class="{{manualSortHeaders['Student']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('StudentIdentifier')">Student ID <i class="{{manualSortHeaders['StudentIdentifier']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att1Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att1')">{{::attributeHeaders['Att1']}} <i class="{{manualSortHeaders['Att1']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att2Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att2')">{{::attributeHeaders['Att2']}} <i class="{{manualSortHeaders['Att2']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att3Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att3')">{{::attributeHeaders['Att3']}} <i class="{{manualSortHeaders['Att3']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att4Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att4')">{{::attributeHeaders['Att4']}} <i class="{{manualSortHeaders['Att4']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att5Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att5')">{{::attributeHeaders['Att5']}} <i class="{{manualSortHeaders['Att5']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att6Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att6')">{{::attributeHeaders['Att6']}} <i class="{{manualSortHeaders['Att6']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att7Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att7')">{{::attributeHeaders['Att7']}} <i class="{{manualSortHeaders['Att7']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att8Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att8')">{{::attributeHeaders['Att8']}} <i class="{{manualSortHeaders['Att8']}}"></i></div></th>
                                            <th ng-if="groupsFactory.Att9Visible" rowspan="2"><div style="cursor: pointer;" ng-click="sort('Att9')">{{::attributeHeaders['Att9']}} <i class="{{manualSortHeaders['Att9']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('SpecialED')">Special Ed. <i class="{{manualSortHeaders['SpecialED']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('Services')">Student Svcs. <i class="{{manualSortHeaders['Services']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('School')">School <i class="{{manualSortHeaders['School']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('GradeOrder')">Grade <i class="{{manualSortHeaders['GradeOrder']}}"></i></div></th>
                                            <th rowspan="2"><div style="cursor: pointer;" ng-click="sort('Teacher')">Teacher <i class="{{manualSortHeaders['Teacher']}}"></i></div></th>
                                            <!--<th rowspan="2">School / Grade (Teacher) </th>-->
                                            <th class="text-center" ng-repeat="tdd in groupsFactory.TestDueDates" style="border-left:3px solid #e9ecf0; border-right: 3px solid #e9ecf0;border-top:3px solid #e9ecf0;" colspan="{{groupsFactory.Fields.length}}">{{getSummaryHeader(tdd.DisplayDate)}}</th>
                                        </tr>
                                        <tr ns-summary-field-headers sort-array="sortArray" sortable="true" data-rows="groupsFactory" tdds="groupsFactory.TestDueDates" fields="groupsFactory.Fields" sort-mgr="sortMgr" header-class-array="headerClassArray"></tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="record in groupsFactory.SummaryRecords | orderBy:sortArray" ns-summary-field tdds="groupsFactory.TestDueDates" fields="groupsFactory.Fields" student-result="record">
                                            <td>
                                                <span student-dashboard-link student-id="record.StudentID" student-name="record.Student"></span>
                                            </td>
                                            <td>
                                                {{::record.StudentIdentifier}}
                                            </td>
                                            <td ng-if="groupsFactory.Att1Visible">{{::record.Att1}}</td>
                                            <td ng-if="groupsFactory.Att2Visible">{{::record.Att2}}</td>
                                            <td ng-if="groupsFactory.Att3Visible">{{::record.Att3}}</td>
                                            <td ng-if="groupsFactory.Att4Visible">{{::record.Att4}}</td>
                                            <td ng-if="groupsFactory.Att5Visible">{{::record.Att5}}</td>
                                            <td ng-if="groupsFactory.Att6Visible">{{::record.Att6}}</td>
                                            <td ng-if="groupsFactory.Att7Visible">{{::record.Att7}}</td>
                                            <td ng-if="groupsFactory.Att8Visible">{{::record.Att8}}</td>
                                            <td ng-if="groupsFactory.Att9Visible">{{::record.Att9}}</td>
                                            <td>{{::record.SpecialED}}</td>
                                            <td>{{::record.Services}}</td>
                                            <td>{{::record.School}}</td>
                                            <td>{{::record.Grade}}</td>
                                            <td>{{::record.Teacher}}</td>
                                            <!--<td>
                                        <div ng-repeat="location in record.SchoolsSectionsList">
                                            {{::location}}
                                        </div>
                                    </td>-->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </panel>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    i.fa-angle-down, i.fa-angle-left {
        margin-top: 10px;
    }

    h4.panel-title {
        width: 100%;
    }

        h4.panel-title a:focus {
            outline: none;
        }

    uib-accordion h4.panel-title a {
        line-height: 40px;
        display: block;
        cursor: pointer;
        margin: 0 -15px;
        padding: 0 15px;
    }

        uib-accordion h4.panel-title a:hover, uib-accordion h4.panel-title a:focus {
            text-decoration: none;
        }

    .radio {
        display: inline;
    }
             stacked-bar-graph-summary-attribute-chooser .btn-toolbar {
        display: inline-block;
    }
</style>