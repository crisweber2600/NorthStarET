  Determining projects to restore...
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Configuration.EnvironmentVariables will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary. [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Configuration.Json will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary. [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Options.ConfigurationExtensions will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary. [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Options.DataAnnotations will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary. [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
  Restored D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Contracts\NorthStarET.NextGen.Lms.Contracts.csproj (in 227 ms).
  Restored D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Domain\NorthStarET.NextGen.Lms.Domain.csproj (in 227 ms).
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1903: Package 'Microsoft.Build.Tasks.Core' 17.14.8 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1903: Package 'Microsoft.Build.Utilities.Core' 17.14.8 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
  Restored D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Application\NorthStarET.NextGen.Lms.Application.csproj (in 484 ms).
  Restored D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj (in 571 ms).
  Restored D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj (in 637 ms).
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Configuration.EnvironmentVariables will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary.
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Configuration.Json will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary.
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Options.ConfigurationExtensions will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary.
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1510: PackageReference Microsoft.Extensions.Options.DataAnnotations will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary.
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1903: Package 'Microsoft.Build.Tasks.Core' 17.14.8 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj : warning NU1903: Package 'Microsoft.Build.Utilities.Core' 17.14.8 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq
  NorthStarET.NextGen.Lms.Domain -> D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Domain\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Domain.dll
  NorthStarET.NextGen.Lms.Contracts -> D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Contracts\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Contracts.dll
  NorthStarET.NextGen.Lms.Application -> D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Application\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Application.dll
D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\Identity\ExternalServices\EntraTokenValidator.cs(70,33): warning CS8602: Dereference of a possibly null reference. [D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\NorthStarET.NextGen.Lms.Infrastructure.csproj]
  NorthStarET.NextGen.Lms.Infrastructure -> D:\NorthStarET.Lms\src\NorthStarET.NextGen.Lms.Infrastructure\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Infrastructure.dll
bin\Debug\net9.0\Features\AuditAndEvents.feature.cs : warning : For codebehind file 'bin\Debug\net9.0\Features\AuditAndEvents.feature.cs', no feature file was found. [D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\NorthStarET.NextGen.Lms.Bdd.csproj]
  NorthStarET.NextGen.Lms.Bdd -> D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Bdd.dll
Test run for D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\NorthStarET.NextGen.Lms.Bdd.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:01.00]     Idempotency prevents duplicate district creation [FAIL]
[xUnit.net 00:00:01.02]     District suffix is case-insensitive [FAIL]
[xUnit.net 00:00:01.05]     System Admin views all active districts [FAIL]
[xUnit.net 00:00:01.05]     System Admin creates a new district with valid data [FAIL]
[xUnit.net 00:00:01.06]     System Admin cannot update district suffix to duplicate value [FAIL]
[xUnit.net 00:00:01.06]     Pagination for large district lists [FAIL]
[xUnit.net 00:00:01.06]     System Admin cannot create district with duplicate suffix [FAIL]
[xUnit.net 00:00:01.07]     System Admin creates district with invalid name (too short) [FAIL]
[xUnit.net 00:00:01.07]     System Admin cannot update district suffix to duplicate value [FAIL]
  Failed District suffix is case-insensitive [143 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.DistrictSuffixIsCase_Insensitive() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 178
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "demo"
 -> skipped because of previous errors
 When I attempt to create a district with suffix "DEMO"
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'DEMO' is already in use"
 -> skipped because of previous errors


  Failed Idempotency prevents duplicate district creation [147 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.IdempotencyPreventsDuplicateDistrictCreation() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 134
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I attempt to create the same district again within 10 minutes
 -> skipped because of previous errors
 Then the operation should return the existing district ID
 -> skipped because of previous errors
 And no new district should be created
 -> skipped because of previous errors
 And no additional audit record should be created
 -> skipped because of previous errors


  Failed System Admin views all active districts [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminViewsAllActiveDistricts() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 64
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name           | Suffix |
   | District One   | one    |
   | District Two   | two    |
   | District Three | three  |
 -> skipped because of previous errors
 When I request the list of active districts
 -> skipped because of previous errors
 Then I should see 3 districts
 -> skipped because of previous errors
 And the districts should be ordered by name
 -> skipped because of previous errors
 And each district should include:
   --- table step argument ---
   | Field        |
   | Id           |
   | Name         |
   | Suffix       |
   | CreatedAtUtc |
 -> skipped because of previous errors


  Failed System Admin creates a new district with valid data [7 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminCreatesANewDistrictWithValidData() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 25
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Demo District |
   | Suffix | demo          |
 -> skipped because of previous errors
 Then the district should be created successfully
 -> skipped because of previous errors
 And the district should have ID assigned
 -> skipped because of previous errors
 And the district "Name" should be "Demo District"
 -> skipped because of previous errors
 And the district "Suffix" should be "demo"
 -> skipped because of previous errors
 And the district "CreatedAtUtc" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictCreated" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with action "CreateDistrict"
 -> skipped because of previous errors


  Failed System Admin cannot update district suffix to duplicate value [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminCannotUpdateDistrictSuffixToDuplicateValue() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 100
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name         | Suffix |
   | District One | one    |
   | District Two | two    |
 -> skipped because of previous errors
 When I attempt to update "District One" with suffix "two"
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'two' is already in use"
 -> skipped because of previous errors
 And the district "Suffix" should remain "one"
 -> skipped because of previous errors


  Failed Pagination for large district lists [19 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.PaginationForLargeDistrictLists() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 194
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given 100 districts exist
 -> skipped because of previous errors
 When I request districts with page size 20 and page 2
 -> skipped because of previous errors
 Then I should see 20 districts
 -> skipped because of previous errors
 And the response should include pagination metadata:
   --- table step argument ---
   | Field      | Value |
   | Page       | 2     |
   | PageSize   | 20    |
   | TotalCount | 100   |
   | TotalPages | 5     |
 -> skipped because of previous errors


  Failed System Admin cannot create district with duplicate suffix [16 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminCannotCreateDistrictWithDuplicateSuffix() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 36
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "demo"
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value            |
   | Name   | Another District |
   | Suffix | demo             |
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'demo' is already in use"
 -> skipped because of previous errors
 And no district should be created
 -> skipped because of previous errors
 And no audit record should be created
 -> skipped because of previous errors


  Failed System Admin creates district with invalid name (too short) [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminCreatesDistrictWithInvalidNameTooShort() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 44
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value |
   | Name   | AB    |
   | Suffix | test  |
 -> skipped because of previous errors
 Then the operation should fail with validation error "Name must be between 3 and 100 characters"
 -> skipped because of previous errors


  Failed System Admin cannot update district suffix to duplicate value [7 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminCannotUpdateDistrictSuffixToDuplicateValue() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 100
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name         | Suffix |
   | District One | one    |
   | District Two | two    |
 -> skipped because of previous errors
 When I attempt to update "District One" with suffix "two"
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'two' is already in use"
 -> skipped because of previous errors
 And the district "Suffix" should remain "one"
 -> skipped because of previous errors


[xUnit.net 00:00:01.14]     Idempotency prevents duplicate district creation [FAIL]
[xUnit.net 00:00:01.15]     System Admin creates district with invalid suffix (special characters) [FAIL]
[xUnit.net 00:00:01.16]     System Admin cannot create district with duplicate suffix [FAIL]
[xUnit.net 00:00:01.16]     System Admin deletes district with active admins (cascade revoke) [FAIL]
[xUnit.net 00:00:01.17]     System Admin soft-deletes a district [FAIL]
[xUnit.net 00:00:01.17]     System Admin updates district name and suffix [FAIL]
[xUnit.net 00:00:01.18]     System Admin deletes district with active admins (cascade revoke) [FAIL]
[xUnit.net 00:00:01.19]     Soft-deleted districts are excluded from active list [FAIL]
  Failed Idempotency prevents duplicate district creation [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.IdempotencyPreventsDuplicateDistrictCreation() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 134
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I attempt to create the same district again within 10 minutes
 -> skipped because of previous errors
 Then the operation should return the existing district ID
 -> skipped because of previous errors
 And no new district should be created
 -> skipped because of previous errors
 And no additional audit record should be created
 -> skipped because of previous errors


  Failed System Admin creates district with invalid suffix (special characters) [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminCreatesDistrictWithInvalidSuffixSpecialCharacters() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 52
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value          |
   | Name   | Test District  |
   | Suffix | test_district! |
 -> skipped because of previous errors
 Then the operation should fail with validation error "Suffix must contain only lowercase letters, numbers, dots, and hyphens"
 -> skipped because of previous errors


  Failed System Admin cannot create district with duplicate suffix [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminCannotCreateDistrictWithDuplicateSuffix() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 36
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "demo"
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value            |
   | Name   | Another District |
   | Suffix | demo             |
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'demo' is already in use"
 -> skipped because of previous errors
 And no district should be created
 -> skipped because of previous errors
 And no audit record should be created
 -> skipped because of previous errors


  Failed System Admin deletes district with active admins (cascade revoke) [6 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminDeletesDistrictWithActiveAdminsCascadeRevoke() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 123
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "test"
 -> skipped because of previous errors
 And the district has 2 active district admins
 -> skipped because of previous errors
 When I delete the district
 -> skipped because of previous errors
 Then the district should be soft-deleted
 -> skipped because of previous errors
 And all 2 district admins should be revoked
 -> skipped because of previous errors
 And "DistrictAdminRevoked" events should be emitted for each admin
 -> skipped because of previous errors
 And audit records should be created for admin revocations
 -> skipped because of previous errors


  Failed System Admin soft-deletes a district [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminSoft_DeletesADistrict() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 113
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I delete the district
 -> skipped because of previous errors
 Then the district should be soft-deleted
 -> skipped because of previous errors
 And the district "DeletedAt" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictDeleted" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with action "DeleteDistrict"
 -> skipped because of previous errors
 And the district should not appear in active district list
 -> skipped because of previous errors


  Failed System Admin updates district name and suffix [6 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminUpdatesDistrictNameAndSuffix() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 86
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value        |
   | Name   | Old District |
   | Suffix | old          |
 -> skipped because of previous errors
 When I update the district with:
   --- table step argument ---
   | Field  | Value        |
   | Name   | New District |
   | Suffix | new          |
 -> skipped because of previous errors
 Then the district should be updated successfully
 -> skipped because of previous errors
 And the district "Name" should be "New District"
 -> skipped because of previous errors
 And the district "Suffix" should be "new"
 -> skipped because of previous errors
 And the district "UpdatedAtUtc" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictUpdated" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with:
   --- table step argument ---
   | Field         | Value               |
   | Action        | UpdateDistrict      |
   | BeforePayload | Contains old values |
   | AfterPayload  | Contains new values |
 -> skipped because of previous errors


  Failed System Admin deletes district with active admins (cascade revoke) [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminDeletesDistrictWithActiveAdminsCascadeRevoke() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 123
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "test"
 -> skipped because of previous errors
 And the district has 2 active district admins
 -> skipped because of previous errors
 When I delete the district
 -> skipped because of previous errors
 Then the district should be soft-deleted
 -> skipped because of previous errors
 And all 2 district admins should be revoked
 -> skipped because of previous errors
 And "DistrictAdminRevoked" events should be emitted for each admin
 -> skipped because of previous errors
 And audit records should be created for admin revocations
 -> skipped because of previous errors


  Failed Soft-deleted districts are excluded from active list [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.Soft_DeletedDistrictsAreExcludedFromActiveList() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 172
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name         | Suffix | DeletedAt  |
   | Active One   | one    |            |
   | Deleted Two  | two    | 2025-10-20 |
   | Active Three | three  |            |
 -> skipped because of previous errors
 When I request the list of active districts
 -> skipped because of previous errors
 Then I should see 2 districts
 -> skipped because of previous errors
 And "Deleted Two" should not be in the list
 -> skipped because of previous errors


[xUnit.net 00:00:01.23]     System Admin views all active districts [FAIL]
[xUnit.net 00:00:01.24]     Pagination for large district lists [FAIL]
[xUnit.net 00:00:01.24]     System Admin retrieves district by ID [FAIL]
[xUnit.net 00:00:01.24]     District name is trimmed before validation [FAIL]
[xUnit.net 00:00:01.25]     District creation after idempotency window expires [FAIL]
[xUnit.net 00:00:01.25]     System Admin creates a new district with valid data [FAIL]
[xUnit.net 00:00:01.26]     Soft-deleted districts are excluded from active list [FAIL]
[xUnit.net 00:00:01.26]     System Admin retrieves district by ID [FAIL]
  Failed System Admin views all active districts [9 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminViewsAllActiveDistricts() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 64
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name           | Suffix |
   | District One   | one    |
   | District Two   | two    |
   | District Three | three  |
 -> skipped because of previous errors
 When I request the list of active districts
 -> skipped because of previous errors
 Then I should see 3 districts
 -> skipped because of previous errors
 And the districts should be ordered by name
 -> skipped because of previous errors
 And each district should include:
   --- table step argument ---
   | Field        |
   | Id           |
   | Name         |
   | Suffix       |
   | CreatedAtUtc |
 -> skipped because of previous errors


  Failed Pagination for large district lists [8 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.PaginationForLargeDistrictLists() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 194
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given 100 districts exist
 -> skipped because of previous errors
 When I request districts with page size 20 and page 2
 -> skipped because of previous errors
 Then I should see 20 districts
 -> skipped because of previous errors
 And the response should include pagination metadata:
   --- table step argument ---
   | Field      | Value |
   | Page       | 2     |
   | PageSize   | 20    |
   | TotalCount | 100   |
   | TotalPages | 5     |
 -> skipped because of previous errors


  Failed System Admin retrieves district by ID [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminRetrievesDistrictByID() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 151
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I request the district by ID
 -> skipped because of previous errors
 Then I should receive the district details
 -> skipped because of previous errors
 And the response should include:
   --- table step argument ---
   | Field             |
   | Id                |
   | Name              |
   | Suffix            |
   | CreatedAtUtc      |
   | UpdatedAtUtc      |
   | IsDeleted         |
   | ActiveAdminCount  |
   | PendingAdminCount |
   | RevokedAdminCount |
 -> skipped because of previous errors


  Failed District name is trimmed before validation [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.DistrictNameIsTrimmedBeforeValidation() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 187
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 Then the district "Name" should be "Test District"
 -> skipped because of previous errors
 And the name should not have leading or trailing spaces
 -> skipped because of previous errors


  Failed District creation after idempotency window expires [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.DistrictCreationAfterIdempotencyWindowExpires() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 141
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given I created a district with suffix "test" 11 minutes ago
 -> skipped because of previous errors
 When I create a new district with the same data
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'test' is already in use"
 -> skipped because of previous errors
 And no new district should be created
 -> skipped because of previous errors


  Failed System Admin creates a new district with valid data [7 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminCreatesANewDistrictWithValidData() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 25
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Demo District |
   | Suffix | demo          |
 -> skipped because of previous errors
 Then the district should be created successfully
 -> skipped because of previous errors
 And the district should have ID assigned
 -> skipped because of previous errors
 And the district "Name" should be "Demo District"
 -> skipped because of previous errors
 And the district "Suffix" should be "demo"
 -> skipped because of previous errors
 And the district "CreatedAtUtc" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictCreated" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with action "CreateDistrict"
 -> skipped because of previous errors


  Failed Soft-deleted districts are excluded from active list [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.Soft_DeletedDistrictsAreExcludedFromActiveList() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 172
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given districts exist:
   --- table step argument ---
   | Name         | Suffix | DeletedAt  |
   | Active One   | one    |            |
   | Deleted Two  | two    | 2025-10-20 |
   | Active Three | three  |            |
 -> skipped because of previous errors
 When I request the list of active districts
 -> skipped because of previous errors
 Then I should see 2 districts
 -> skipped because of previous errors
 And "Deleted Two" should not be in the list
 -> skipped because of previous errors


  Failed System Admin retrieves district by ID [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminRetrievesDistrictByID() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 151
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I request the district by ID
 -> skipped because of previous errors
 Then I should receive the district details
 -> skipped because of previous errors
 And the response should include:
   --- table step argument ---
   | Field             |
   | Id                |
   | Name              |
   | Suffix            |
   | CreatedAtUtc      |
   | UpdatedAtUtc      |
   | IsDeleted         |
   | ActiveAdminCount  |
   | PendingAdminCount |
   | RevokedAdminCount |
 -> skipped because of previous errors


[xUnit.net 00:00:01.27]     System Admin creates district with invalid suffix (special characters) [FAIL]
[xUnit.net 00:00:01.30]     District creation after idempotency window expires [FAIL]
[xUnit.net 00:00:01.30]     District name is trimmed before validation [FAIL]
[xUnit.net 00:00:01.30]     System Admin soft-deletes a district [FAIL]
[xUnit.net 00:00:01.31]     District suffix is case-insensitive [FAIL]
[xUnit.net 00:00:01.31]     System Admin updates district name and suffix [FAIL]
[xUnit.net 00:00:01.32]     System Admin creates district with invalid name (too short) [FAIL]
  Failed System Admin creates district with invalid suffix (special characters) [4 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminCreatesDistrictWithInvalidSuffixSpecialCharacters() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 52
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value          |
   | Name   | Test District  |
   | Suffix | test_district! |
 -> skipped because of previous errors
 Then the operation should fail with validation error "Suffix must contain only lowercase letters, numbers, dots, and hyphens"
 -> skipped because of previous errors


  Failed District creation after idempotency window expires [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.DistrictCreationAfterIdempotencyWindowExpires() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 141
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given I created a district with suffix "test" 11 minutes ago
 -> skipped because of previous errors
 When I create a new district with the same data
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'test' is already in use"
 -> skipped because of previous errors
 And no new district should be created
 -> skipped because of previous errors


  Failed District name is trimmed before validation [7 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.DistrictNameIsTrimmedBeforeValidation() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 187
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I create a district with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 Then the district "Name" should be "Test District"
 -> skipped because of previous errors
 And the name should not have leading or trailing spaces
 -> skipped because of previous errors


  Failed System Admin soft-deletes a district [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.SystemAdminSoft_DeletesADistrict() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 113
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value         |
   | Name   | Test District |
   | Suffix | test          |
 -> skipped because of previous errors
 When I delete the district
 -> skipped because of previous errors
 Then the district should be soft-deleted
 -> skipped because of previous errors
 And the district "DeletedAt" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictDeleted" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with action "DeleteDistrict"
 -> skipped because of previous errors
 And the district should not appear in active district list
 -> skipped because of previous errors


  Failed District suffix is case-insensitive [3 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net10_0.Features.DistrictManagementFeature.DistrictSuffixIsCase_Insensitive() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net10.0\Features\DistrictManagement.feature:line 178
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with suffix "demo"
 -> skipped because of previous errors
 When I attempt to create a district with suffix "DEMO"
 -> skipped because of previous errors
 Then the operation should fail with error "Suffix 'DEMO' is already in use"
 -> skipped because of previous errors


  Failed System Admin updates district name and suffix [7 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminUpdatesDistrictNameAndSuffix() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 86
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 Given a district exists with:
   --- table step argument ---
   | Field  | Value        |
   | Name   | Old District |
   | Suffix | old          |
 -> skipped because of previous errors
 When I update the district with:
   --- table step argument ---
   | Field  | Value        |
   | Name   | New District |
   | Suffix | new          |
 -> skipped because of previous errors
 Then the district should be updated successfully
 -> skipped because of previous errors
 And the district "Name" should be "New District"
 -> skipped because of previous errors
 And the district "Suffix" should be "new"
 -> skipped because of previous errors
 And the district "UpdatedAtUtc" should be set to current timestamp
 -> skipped because of previous errors
 And a "DistrictUpdated" domain event should be emitted
 -> skipped because of previous errors
 And an audit record should be created with:
   --- table step argument ---
   | Field         | Value               |
   | Action        | UpdateDistrict      |
   | BeforePayload | Contains old values |
   | AfterPayload  | Contains new values |
 -> skipped because of previous errors


  Failed System Admin creates district with invalid name (too short) [5 ms]
  Error Message:
   System.InvalidOperationException : No constructor for type 'MediatR.Licensing.LicenseAccessor' can be instantiated using services from the service container and default values.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.MediatRServiceCollectionExtensions.CheckLicense(IServiceProvider serviceProvider)
   at MediatR.Mediator..ctor(IServiceProvider serviceProvider, INotificationPublisher publisher)
   at InvokeStub_Mediator..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at NorthStarET.NextGen.Lms.Bdd.Support.DistrictScenarioContext..ctor() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\DistrictScenarioContext.cs:line 48
   at NorthStarET.NextGen.Lms.Bdd.Support.ScenarioHooks.InitializeScenario() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\Support\ScenarioHooks.cs:line 18
   at InvokeStub_Action`1.Invoke(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Reqnroll.Bindings.BindingInvoker.InvokeBindingAsync(IBinding binding, IContextManager contextManager, Object[] arguments, ITestTracer testTracer, DurationHolder durationHolder)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.InvokeHookAsync(IAsyncBindingInvoker invoker, IHookBinding hookBinding, HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireEventsAsync(HookType hookType)
   at Reqnroll.Infrastructure.TestExecutionEngine.FireScenarioEventsAsync(HookType bindingEvent)
   at Reqnroll.Infrastructure.TestExecutionEngine.OnScenarioStartAsync()
   at Reqnroll.Infrastructure.TestExecutionEngine.OnAfterLastStepAsync()
   at Reqnroll.TestRunner.CollectScenarioErrorsAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.ScenarioCleanupAsync()
   at NorthStarET.NextGen.Lms.Bdd.Bin.Debug.Net9_0.Features.DistrictManagementFeature.SystemAdminCreatesDistrictWithInvalidNameTooShort() in D:\NorthStarET.Lms\tests\bdd\NorthStarET.NextGen.Lms.Bdd\bin\Debug\net9.0\Features\DistrictManagement.feature:line 44
--- End of stack trace from previous location ---
  Standard Output Messages:
 Given I am authenticated as a System Admin
 -> skipped because of previous errors
 And the system has no existing districts
 -> skipped because of previous errors
 When I attempt to create a district with:
   --- table step argument ---
   | Field  | Value |
   | Name   | AB    |
   | Suffix | test  |
 -> skipped because of previous errors
 Then the operation should fail with validation error "Name must be between 3 and 100 characters"
 -> skipped because of previous errors



Failed!  - Failed:    32, Passed:     0, Skipped:     0, Total:    32, Duration: 521 ms - NorthStarET.NextGen.Lms.Bdd.dll (net10.0)
